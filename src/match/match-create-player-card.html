<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../common/paper-loading-fab.html">
<link rel="import" href="../player/player-avatar.html">

<dom-module id="match-create-player-card">
  <template>
    <style>
    :host {
      position: relative;
      @apply --paper-material;
      @apply --paper-material-elevation-1;
      @apply --layout-vertical;
      @apply --layout-center;
      margin: var(--spacing);
      background-color: var(--primary-background-color);
      border-radius: var(--radius);
      padding: var(--spacing-m);
      overflow: hidden;
      cursor: pointer;
    }

    :host .fit-actions {
      position: absolute;
      top:0;
      right:0;
      bottom:0;
      left:0;
      @apply --layout-horizontal;
      @apply --layout-center-center;
      background-color: var(--primary-color-transparent);
      transition: all 200ms ease-in-out;
    }
    :host([selected]) .fit-actions {
      transition-delay: 0ms;
      opacity: 1;
    }
    :host(:not([selected])) .fit-actions {
      pointer-events: none;
      transition-delay: 200ms;
      opacity: 0;
    }
    :host([selected]) paper-fab {
      transform: scale(1, 1);
      transition-delay: 200ms;
    }
    :host(:not([selected])) paper-fab {
      transform: scale(0, 0);
      transition-delay: 0ms;
    }
    .divider {
      width: calc(100% + (2 * var(--spacing-m)));
      border-top: 1px solid var(--divider-color);
      margin-bottom: var(--spacing-m);
    }
    span + span {
      margin-top: var(--spacing);
    }
    player-avatar {
      margin-bottom: var(--spacing-m);
    }
    paper-fab {
      transition: all 200ms ease-in-out;
    }
    </style>

    <player-avatar big src="[[player.photoURL]]"></player-avatar>
    <div class="divider"></div>
    <span>[[player.displayName]]</span>
    <span>[[player.rating]]</span>

    <div class="fit-actions">
      <paper-loading-fab icon="done" on-tap="_onSelectTap" loading="[[loading]]"></paper-loading-fab>
    </div>
  </template>
  <script>
    class MatchCreatePlayerCard extends Polymer.Element {
      static get is () { return 'match-create-player-card' }
      static get properties () {
        return {
          selected: {
            type: Boolean,
            reflectToAttribute: true
          },
          player: Object,
          loading: Boolean
        }
      }
      _onSelectTap () {
        this.dispatchEvent(new CustomEvent('player-selected', {
          detail: {
            uid: this.player.uid
          }}))
      }
    }

    window.customElements.define(MatchCreatePlayerCard.is, MatchCreatePlayerCard)
  </script>
</dom-module>
