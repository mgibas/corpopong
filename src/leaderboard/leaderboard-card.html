<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../styles/app-styles.html">
<link rel="import" href="../org/org-element.html">
<link rel="import" href="../dashboard/dashboard-card.html">
<link rel="import" href="../leaderboard/leaderboard-top-3.html">

<dom-module id="leaderboard-card">
  <template>
    <style include="app-styles"></style>
    <style>
    .no-data {
      color: var(--secondary-text-color);
      font-size: 1.5rem;
      text-align: center;
    }
    [slot="content"] {
      height: 100%;
    }
    leaderboard-top-3 {
      pointer-events: none;
    }
    </style>

    <firebase-query
      path="/orgs/[[org]]/players"
      data="{{players}}"
      order-by-child="rated"
      equal-to="true">
    </firebase-query>

    <a href="/leaderboard" tabindex="-1">
      <dashboard-card>
        <div slot="content">
          <leaderboard-top-3 players="[[players]]" hidden="[[!players.length]]"></leaderboard-top-3>
          <div class="no-data" hidden="[[players.length]]">
            <i>Not much in here :(</i>
          </div>
        </div>
        <h2 slot="footer">Leaderboard</h2>
      </dashboard-card>
    </a>

  </template>
  <script>
    class LeaderboardCard extends OrgElement {
      static get is () { return 'leaderboard-card' }
    }

    window.customElements.define(LeaderboardCard.is, LeaderboardCard)
  </script>
</dom-module>
